function getDatesArr(e,t){for(var a=new Array,n=e;n<=t;)a.push(new Date(n)),n=n.addDays(1);return a}function responsive_filemanager_callback(e){$("#"+e);var t=$("#"+e).val();$("."+e).attr("src",t),$.fancybox.close()}function OnMessage(e){var t=e.originalEvent;if("RESPONSIVEfilemanager"===t.data.sender&&t.data.field_id){var a=t.data.field_id,n=t.data.url;$("#"+a).val(n).trigger("change"),$.fancybox.close(),$(window).off("message",OnMessage)}}function open_popup(e){var t=Math.floor((screen.width-880)/2),a=Math.floor((screen.height-570)/2);window.open(e,"ResponsiveFilemanager","scrollbars=1,width=880,height=570,top="+a+",left="+t)}function moreupload(e,t){return'<div style="margin-bottom:15px; margin-top:15px;" class="item-more-'+t+'"><div class="input-group"><input type="hidden" name="product_image_id[]"><input id="image'+t+'" type="text" class="form-control" name="product_image[]" data-more="image"><a class="input-group-addon btn btn-default btn-flat input-group-addon" type="button" onclick="openKCFinder('+("'image"+t+"'")+')">Browse</a></div><br><div class="form-group"><div class="col-lg-6"><img id="preview-image'+t+'" class="image'+t+' img-responsive img-thumbnail preview-more" src="'+e+'assets/images/no-image.png"></div><div class="col-lg-6 text-right"><a class="btn btn-danger btn-cancel-more btn-flat" data-more="image" id="item-more-'+t+'"> Remove <i class="fa fa-arrow-up"></i></a></div></div></div>'}function moresizestock(){return'<tr><td><i class="fa fa-arrows-alt" aria-hidden="true"></i></td><td style="width: 180px;"><input type="hidden" name="product_sizestock_id[]"><input style="margin: 0 auto;" type="text" name="product_size[]" class="form-control"></td><td style="width: 65px;"><input type="text" style="margin: 0 auto;" name="product_stock[]" class="stockmask form-control"></td><td><textarea wrap="hard" style="height: 100px;" name="product_estimasiukuran[]" class="form-control"></textarea></td><td><button class="remove-item-table circle-button btn btn-danger btn-flat" type="button"><i class="fa fa-times"></i></button></td></tr>'}function moreextrapayment(){return'<tr><td style="padding: 8px;width: 150px;"><select class="form-control" name="rental_extrapayment_flag[]"><option value="sewa">Harga Sewa</option><option value="deposit">Harga Deposit</option></select></td><td colspan="3" style="padding: 8px;"><textarea placeholder="Notes payment:" wrap="hard" style="text-align:left;" name="rental_extranote[]" class="form-control"></textarea></td><td><input type="hidden"></td><td class="extrapayment-row extrapayment-sewa" style="padding: 8px;"><input type="hidden" name="rental_extrapayment_id[]"><input type="text" style="margin: 0 auto; text-align:center;display:inline-block;" name="rental_extrapayment[]" class="pricemask pricepayment form-control" value="0"></td><td class="extrapayment-row extrapayment-deposit" style="padding: 8px;"></td><td><button style="display: inline-block;margin-left: 5px;vertical-align: top;" class="remove-extrapayment circle-button btn btn-danger btn-flat" type="button"><i class="fa fa-times"></i></button></td></tr>'}function moredenda(){return'<tr class="item-biaya"><td><textarea placeholder="Notes:" wrap="hard" style="text-align:left;" name="rental_dendanote[]" class="form-control"></textarea></td><td><input type="hidden" name="rental_dendapayment_flag[]" value="denda"><input type="hidden" name="rental_dendapayment_id[]"><input type="text" style="margin: 0 auto; text-align:center;display:inline-block;" name="rental_dendapayment[]" class="pricemask pricepayment form-control" value="0"></td><td style="width: 1px;text-align: center;padding-left: 0;padding-right: 0;margin-right: 0;margin-left: 0;"><button style="display: inline-block;vertical-align: top;" class="remove-denda circle-button btn btn-danger btn-flat" type="button"><i class="fa fa-times"></i></button></td></tr>'}function totalmoreextrapayment(){return'<tfoot><tr><td colspan="1" style="text-align: right;background-color: #D3D3D3;font-weight: bold; padding: 8px;border:1px solid #f4f4f4;">Extra Payment:</td><td colspan="3" class="total_extrapayment" style="text-align: center;background-color: #D3D3D3;font-weight: bold; padding: 8px;border:1px solid #f4f4f4;"><strong>0</strong></td></tr><tr><td colspan="1" style="text-align: right;background-color: #D3D3D3;font-weight: bold; padding: 8px; border:1px solid #f4f4f4;">Total Order + Extra Payment:</td><td colspan="3" class="total_with_extrapayment" style="text-align: center;background-color: #D3D3D3;font-weight: bold; padding: 8px;border:1px solid #f4f4f4;"><strong>0</strong></td></tr></tfoot>'}function swap(e,t){e=$(e),t=$(t);var a=$("<span>").hide();e.before(a),t.before(e),a.replaceWith(t)}function emptyTerimaJenisTransaksi(){return'<tr class="empty-table"><td colspan="5"></td></tr>'}function terimaJenisTransaksi(e,t){return"sewa"==e&&(label="Terima Uang Sewa"),"deposit"==e&&(label="Terima Uang Deposit"),'<tr class="item-terima-uang"><td><input type="hidden" name="jenis_transaksi_id[]"><input type="hidden" name="jenis_transaksi[]" value="'+e+'">'+label+'</td><td style="width: 150px;"><select class="form-control" name="jenis_transaksi_flag[]"><option value="cash">Cash</option><option value="transfer">Transfer</option><option value="debit">Debit</option></select></td><td><input type="text" style="margin: 0 auto; text-align:center;display:inline-block;width:90%;" name="jenis_transaksi_nominal[]" class="pricemask pricepayment form-control" value="'+t+'"></td><td><textarea placeholder="Notes:" wrap="hard" style="text-align:left;" name="jenis_transaksi_note[]" class="form-control"></textarea></td><td><button class="remove-terima-uang circle-button btn btn-danger btn-flat" type="button"><i class="fa fa-times"></i></button></td></tr>'}function kembaliJenisTransaksi(e){var t=0;return e>0&&(t=e),'<tr class="item-kembali-uang"><td><input type="hidden" name="jenis_transaksi_id[]"><input type="hidden" name="jenis_transaksi[]" value="return">Kembali Uang Deposit</td><td style="width: 150px;"><select class="form-control" name="jenis_transaksi_flag[]"><option value="cash">Cash</option><option value="transfer">Transfer</option></select></td><td><input type="text" style="margin: 0 auto; text-align:center;display:inline-block;width:90%;" name="jenis_transaksi_nominal[]" class="pricemask pricepayment form-control" value="'+t+'"></td><td><textarea placeholder="Notes:" wrap="hard" style="text-align:left;" name="jenis_transaksi_note[]" class="form-control"></textarea></td><td><button class="remove-kembali-uang circle-button btn btn-danger btn-flat" type="button"><i class="fa fa-times"></i></button></td></tr>'}function selectJenisTransaksi(e,t=""){var a="";return a+='<div class="form-group">',a+="<label>Jenis Transaksi</label>",a+='<select class="form-control" name="jenis_transaksi_flag">',$.each(e,function(e,n){var r="";n==t&&(r="selected"),a+='<option value="'+n+'" '+r+">"+n.toUpperCase()+"</option>"}),a+="</select>",a+="</div>"}function selectDateAdjustment(e=""){var t="";return t+='<div class="form-group">',t+="<label>Tanggal</label>",t+='<input type="text" class="form-control adjustment-datepicker" value="'+e+'" name="transaksi_created">',t+="</div>"}function selectMetodePembayaran(e,t=""){var a="";return a+='<div class="form-group">',a+="<label>Debit/Kredit</label>",a+='<select class="form-control" name="jenis_transaksi">',$.each(e,function(e,n){var r="";n==t&&(r="selected"),a+='<option value="'+n+'" '+r+">"+("deposit"==n?"DEBIT":"KREDIT")+"</option>"}),a+="</select>",a+="</div>"}function morebukukastransaction(e,t){var a="",n=0,r=["cash","debit","transfer"];return 0!=t.kredit&&(n=t.kredit),0!=t.debit&&(n=t.debit),"add"==e&&(a=selectJenisTransaksi(r)+'<div class="form-group"><label>Debit/Kredit</label><select class="form-control" name="jenis_transaksi"><option value="deposit">Debit</option><option value="sewa">Kredit</option></select></div><div class="form-group"><label>Note</label><textarea wrap="hard" style="height: 200px;" name="jenis_transaksi_note" class="form-control"></textarea></div><div class="form-group"><label>Nominal</label><input type="text" name="jenis_transaksi_nominal" class="pricemask pricepayment form-control" value="0"></div>'),"edit"==e&&(a=selectJenisTransaksi(r,t.jenis)+selectMetodePembayaran(["deposit","sewa"],t.flag)+'<div class="form-group"><label>Note</label><textarea wrap="hard" style="height: 200px;" name="jenis_transaksi_note" class="form-control">'+t.note+'</textarea></div><div class="form-group"><label>Nominal</label><input type="hidden" name="jenis_transaksi_id" value="'+t.id+'"><input type="text" name="jenis_transaksi_nominal" class="pricemask pricepayment form-control" value="'+n+'"></div>'),a}function morecorrection(e){return'<div class="list-correction col-lg-12 col-md-12 col-sm-12 col-xs-12 item-more-'+e+'" style="padding-left: 0; padding-right: 0;"><input type="hidden" name="id[]"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><label>Right</label><input type="text" name="right[]" class="form-control"></div><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><label>Wrong</label><textarea type="text" name="wrong[]" class="form-control"></textarea></div><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="padding-top: 5px;"><button class="remove-correction circle-button btn btn-danger btn-flat" type="button" id="item-more-'+e+'"><i class="fa fa-times"></i> Remove </button></div></div>'}function stockmask(){var e=$(document).find(".stockmask");$(e).inputmask("999",{showMaskOnFocus:!1,showMaskOnHover:!1,placeholder:""})}function addCommas(e){x=(e+="").split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2}function formatDate(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),r=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[r,a,n].join("-")}$.fn.clear=function(){var e=$(this);return e.find("input:text, input:password, input:file, input:hidden, textarea").val(""),e.find("img").attr("src","assets/images/no-image.png"),void 0!==e.find(".colorpicker")&&e.find(".colorpicker").spectrum("set","#000"),e.find("select option:selected").removeAttr("selected"),e.find("input:checkbox, input:radio").removeAttr("checked"),this},$.fn.swapWith=function(e){return this.each(function(){var t=$(e).clone(!0),a=$(this).clone(!0);$(e).replaceWith(a),$(this).replaceWith(t)})},Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t};var dateToday=new Date,returnDateDefault=new Date;function openKCFinder(e){window.KCFinder={callBack:function(t){document.location.origin;document.getElementById("preview-"+e).src=document.location.origin+t,(e=document.getElementById(e)).value=document.location.origin+t,window.KCFinder=null}},window.open("/assets/adminsite/bower_components/kcfinder/browse.php?type=images&dir=images/public","kcfinder_image","status=0, toolbar=0, location=0, menubar=0, directories=0, resizable=1, scrollbars=0, width=800, height=600")}returnDateDefault=formatDate(returnDateDefault=returnDateDefault.setDate(returnDateDefault.getDate()+3)),returnDateDefault=new Date(returnDateDefault),$(function(){var e=$.fn.popover.Constructor.prototype.leave;function t(e,t,a="",n="",r=""){"center"==a&&(a="pnotify-center"),""==n?n=!1:!0!==n&&(n=!1);var i={title:"Notification",text:"This is empty notification.",delay:4e3,addclass:"",hide:!0,confirm:{confirm:n}};switch(e){case"error":i.title="Notification",i.text=t,i.type="error",i.addclass=a;break;case"delete":i.title="Notification",i.text="Data has been deleted successfully.",i.type="success",i.addclass=a;break;case"success":i.title="Notification",i.text="Data has been saved successfully.",i.type="success",i.addclass=a;break;case"update":i.title="Notification",i.text="Data has been updated successfully.",i.type="success",i.addclass=a;break;case"validation":i.title="Notification",i.text=t,i.type="notice",i.addclass=a;break;case"success_with_message":i.title="Notification",i.text=t,i.type="success",i.addclass=a;break;case"alert_confirmation":i.title="Notification",i.text=t,i.type="notice",i.addclass=a,i.hide=!1,i.confirm={confirm:n}}new PNotify(i)}function a(){$("button[type=submit]").attr("disabled",!0)}function n(){$("button[type=submit]").attr("disabled",!1)}$.fn.popover.Constructor.prototype.leave=function(t){var a,n,r=t instanceof this.constructor?t:$(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);e.call(this,t),t.currentTarget&&(a=$(t.currentTarget).siblings(".popover"),n=r.timeout,a.one("mouseenter",function(){clearTimeout(n),a.one("mouseleave",function(){$.fn.popover.Constructor.prototype.leave.call(r,r)})}))};var r=$("base").attr("href"),i=$(document).find(".overlay"),o=$("#form-action"),s=$(o).find("button[type=submit]"),l="#"+$("base").data("table"),d=$("#form-side-right-action"),c=$("ol.serialization").sortable({group:"serialization",delay:500,pullPlaceholder:!1,onDrop:function(e,o,s){var d=c.sortable("serialize").get(),u=(JSON.stringify(d,null," "),[]);$.each(d,function(e,t){$.each(t,function(e,t){u.push(t)})}),$.ajax({url:r+"adminsite/category_sort/update",type:"POST",dataType:"json",cache:!1,data:{data:u},beforeSend:function(e){a(),$(i).show()},complete:function(){n(),$(i).hide()},success:function(e){1==e.flag?(t("update"),void 0!==l&&$(l).DataTable().ajax.reload()):t("error",e.message)},fail:function(){n(),t("error","Connection Error or something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide()}}),s(e,o)}});tinymce.init({selector:".tinymcefull",height:250,menubar:!0,plugins:["advlist autolink link image lists charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars insertdatetime media nonbreaking","table contextmenu directionality emoticons paste textcolor rfm code"],toolbar:"image media | rfm | undo redo | bold italic",image_advtab:!0,extended_valid_elements:"span",external_plugins:{filemanager:r+"assets/adminsite/bower_components/rfm/tinymce/plugins/responsivefilemanager/plugin.min.js"},filemanager_access_key:"gadingkostumdcube2k18",filemanager_title:"Responsive Filemanager",external_filemanager_path:r+"assets/adminsite/bower_components/rfm/filemanager/",file_picker_types:"file image media",file_picker_callback:function(e,t,a){var n=window.innerWidth-30,r=window.innerHeight-60;(n>1800&&(n=1800),r>1200&&(r=1200),n>600)&&(n=n-(n-20)%138+10);var i=2;"image"==a.filetype&&(i=1),"media"==a.filetype&&(i=3);var o="RESPONSIVE FileManager";void 0!==this.settings.filemanager_title&&this.settings.filemanager_title&&(o=this.settings.filemanager_title);var s="key";void 0!==this.settings.filemanager_access_key&&this.settings.filemanager_access_key&&(s=this.settings.filemanager_access_key);var l="";void 0!==this.settings.filemanager_sort_by&&this.settings.filemanager_sort_by&&(l="&sort_by="+this.settings.filemanager_sort_by);var d="false";void 0!==this.settings.filemanager_descending&&this.settings.filemanager_descending&&(d=this.settings.filemanager_descending);var c="";void 0!==this.settings.filemanager_subfolder&&this.settings.filemanager_subfolder&&(c="&fldr="+this.settings.filemanager_subfolder);var u="";void 0!==this.settings.filemanager_crossdomain&&this.settings.filemanager_crossdomain&&(u="&crossdomain=1",window.addEventListener?window.addEventListener("message",filemanager_onMessage,!1):window.attachEvent("onmessage",filemanager_onMessage)),tinymce.activeEditor.windowManager.open({title:o,file:this.settings.external_filemanager_path+"dialog.php?type="+i+"&descending="+d+l+c+u+"&lang="+this.settings.language+"&akey="+s,width:n,height:r,resizable:!0,maximizable:!0,inline:1},{setUrl:function(t){e(t)}})}}),tinymce.init({selector:".tinymcebasic",height:250,menubar:!0,plugins:["paste code"],toolbar:"formatselect | bold italic strikethrough forecolor backcolor | link | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent  | removeformat",image_advtab:!0,extended_valid_elements:"span"}),$(l).on("page.dt",function(){setTimeout(function(){$(document).find(".btn-print-action").printPage()})}),$(document).ajaxComplete(function(){$("input[name='status']").iCheck({checkboxClass:"icheckbox_minimal-blue",radioClass:"iradio_minimal-blue"}),$(".radio-custom").iCheck({checkboxClass:"icheckbox_minimal-blue",radioClass:"iradio_minimal-blue"}),$("input[type='checkbox']").iCheck({checkboxClass:"icheckbox_minimal-blue",radioClass:"iradio_minimal-blue"}),$("#check_action").on("ifChecked",function(e){var t=$('input[name="check_action"]');$(t).iCheck("check")}),$("#check_action").on("ifUnchecked",function(e){var t=$('input[name="check_action"]');$(t).iCheck("uncheck")}),$(".btn-print-action").printPage()}),$(".main-product-rental-wrapper").matchHeight(),$("input[name='status']").iCheck({checkboxClass:"icheckbox_minimal-blue",radioClass:"iradio_minimal-blue"}),$("input[type='checkbox']").iCheck({checkboxClass:"icheckbox_minimal-blue",radioClass:"iradio_minimal-blue"}),$(".radio-custom").iCheck({checkboxClass:"icheckbox_minimal-blue",radioClass:"iradio_minimal-blue"}),void 0!==l&&$(l).on("draw.dt",function(){$("input[type='checkbox']").iCheck({checkboxClass:"icheckbox_minimal-blue",radioClass:"iradio_minimal-blue"})});var u=$(".colorpicker");$(u).spectrum({preferredFormat:"hex3",showPaletteOnly:!0,togglePaletteOnly:!0,togglePaletteMoreText:"more",togglePaletteLessText:"less",color:"#000000",showInput:!0,palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]]});var p=$(".input-number"),m=$(".pricemask");$(p).inputmask("9999",{nullable:!1,oncleared:function(e){$(e.target).val(0)},showMaskOnFocus:!1,showMaskOnHover:!1,placeholder:""});function f(e){$(e).inputmask("numeric",{radixPoint:"",groupSeparator:",",digits:2,autoGroup:!0,rightAlign:!1,allowPlus:!1,allowMinus:!1,nullable:!1,oncleared:function(e){$(e.target).val(0)}})}f(p),f(m),$(l).on("click",".btn-ajax-restore-action",function(e){if(e.preventDefault(),!confirm("Really to restore?"))return!1;var r=$(this).data("url"),o=$(this).data("item");$.ajax({url:r,type:"POST",dataType:"json",data:{id:o},beforeSend:function(){a(),$(i).show()},complete:function(){n(),$(i).hide(),d.length>0&&$(d)[0].reset()},success:function(e){1==e.flag?(t("update"),void 0!==l&&$(l).DataTable().ajax.reload()):t("error",e.message)},fail:function(){n(),t("error","Connection Error or something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide()}})}),$(l).on("click",".btn-ajax-trash-action",function(e){if(e.preventDefault(),!confirm("Really to move it?"))return!1;var r=$(this).data("url"),o=$(this).data("item");$.ajax({url:r,type:"POST",dataType:"json",data:{id:o},beforeSend:function(){a(),$(i).show()},complete:function(){$(i).hide(),d.length>0&&$(d)[0].reset(),n()},success:function(e){n(),1==e.flag?(t("update"),void 0!==l&&$(l).DataTable().ajax.reload()):t("error",e.message)},fail:function(){n(),t("error","Connection Error or something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide()}})}),$(l).on("click",".btn-ajax-delete-action",function(e){if(e.preventDefault(),!confirm("Really Delete?"))return!1;var r=$(this).data("url"),o=$(this).data("item");$.ajax({url:r,type:"POST",dataType:"json",data:{category_id:o},beforeSend:function(){a(),$(i).show()},complete:function(){n(),$(i).hide(),d.length>0&&$(d)[0].reset()},success:function(e){1==e.flag?(t("delete"),void 0!==l&&$(l).DataTable().ajax.reload()):t("error",e.message)},fail:function(){n(),t("error","Connection Error or something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide()}})}),$(l).on("click",".btn-ajax-edit-action",function(e){e.preventDefault();var r=$(this).data("url"),o=$(this).data("item");$.ajax({url:r,type:"POST",dataType:"json",data:{category_id:o},beforeSend:function(){a(),$(i).show(),$(".select2-init").length>0&&$(".select2-init").val(null).trigger("change")},complete:function(){n(),$(i).hide()},success:function(e){$(d).find("select");if(void 0!==e.data&&$.each(e.data,function(e,t){var a=$(d).find("[name='"+e+"']");if($.isArray(t)||"status"==e)if($.isArray(t)||"status"!=e){if($.isArray(t)){var n=$(d).find("[name='"+e+"'] > option");n.length>0&&$.each(n,function(e,a){var n=$(a).val();-1!=jQuery.inArray(n,t)&&($(this).prop("selected",!0),$(".select2-init").select2({tags:!0}))})}}else{var r=$(d).find("[name='"+e+"']");$.each(r,function(e,a){$(a).prop("checked",!1).iCheck("update"),$(a).val()==t&&$(a).prop("checked",!0).iCheck("update")})}else $(a).val(t)}),void 0!==e.select){var t=e.select;$.each(t,function(e,a){var n=$(d).find("[name='"+t.name+"']");$(n).val()==t.value&&$(n).children("option:selected").val()})}if(void 0!==e.colorpicker){t=e.colorpicker;$.each(t,function(e,a){var n=$(d).find("[name='"+t.name+"']");$(n).spectrum("set",t.value)})}if(void 0!==e.checkbox){t=e.checkbox;$.each(t,function(e,a){var n=$(d).find("[name='"+t[e].name+"']"),r=$(n).val();$(n).prop("checked",!1).iCheck("update"),r==t[e].value&&$(n).prop("checked",!0).iCheck("update")})}if(void 0!==e.image){t=e.image;$.each(t,function(e,a){var n=$(d).find("[name='"+t[e].name+"']"),r=$(n).attr("id");""==t[e].value&&(t[e].value="assets/images/no-image.png"),$(n).val(t[e].value),$("."+r).attr("src",t[e].value)})}},fail:function(){n(),t("error","Something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide()}})}),$(s).on("click",function(e){e.preventDefault();var r=$("#action").val(),o=$(document).find('input[name="check_action"]:checked'),s=[];return $(o).each(function(){s.push(this.value)}),"undefined"!=r&&""!=r&&(!!confirm("Are you sure?")&&void $.ajax({url:r,type:"POST",dataType:"json",data:{id:s},beforeSend:function(){a(),$(i).show()},complete:function(){n(),$(i).hide()},success:function(e){$("#check_action").prop("checked",!1).iCheck("update"),1==e&&t("update"),void 0!==l&&$(l).DataTable().ajax.reload()},fail:function(){n(),t("error","Something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide()}}))}),$(d).submit(function(e){e.preventDefault();var r=$(this).attr("action");$(this).serializeArray();$.ajax({url:r,type:"POST",dataType:"json",data:$(this).serializeArray(),beforeSend:function(){a(),$(i).show()},complete:function(){n(),$(i).hide()},success:function(e){1==e.flag&&"insert"==e.process?(t("success"),$(".select2-init").length>0&&$(".select2-init").val(null).trigger("change"),$(d).clear(),$(d)[0].reset(),setTimeout(function(){$("input[name='status']").iCheck("update"),$("input[type='checkbox']").iCheck("update")})):1==e.flag&&"update"==e.process?(t("update"),$(".select2-init").length>0&&$(".select2-init").val(null).trigger("change"),$(d).clear(),$(d)[0].reset(),setTimeout(function(){$("input[name='status']").iCheck("update"),$("input[type='checkbox']").iCheck("update")})):0==e.flag&&"validation"==e.process?t("validation",e.message):t("error","Something Wrong Please Try Again Later"),void 0!==l&&$(l).DataTable().ajax.reload(),void 0!==e.upd_form&&1==$.isArray(e.upd_form)&&$.each(e.upd_form,function(e,t){$(t.element).empty(),setTimeout(function(){$.trim($(t.element).html()).length||$(t.element).append(t.template)})})},fail:function(){n(),t("error","Connection Error or something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide()}})});var g=$(document).find(".save-order"),h=$(document).find(".save-return-order"),v=$("#print-invpinjam");$("#print-invkembali");function b(e,o){$(o).submit(function(o){o.preventDefault();var s=$(this).attr("action");$(this).serializeArray();$.ajax({url:s,type:"POST",dataType:"json",data:$(this).serializeArray(),beforeSend:function(e){a(),$(i).show()},complete:function(){n()},success:function(a){1==a.flag&&2==e?($(v).printPage({url:r+"adminsite/rental_order/"+a.ctr+a.printid,afterCallback:function(){$(i).hide(),window.location.replace(r+"adminsite/rental_order")}}),$(v).trigger("click")):1==a.flag&&1==e?($(i).hide(),window.location.replace(r+"adminsite/rental_order")):($(i).hide(),t("error","Something Wrong Please Try Again Later"))},fail:function(){n(),t("error","Connection Error or something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide(),console.log(r+"\r\n"+e.statusText+"\r\n"+e.responseText)}})})}function y(e){var t=0,a=0;return $.each(e,function(e,a){var n=$(this).val().replace(/,/g,"");""==n&&(n=0),isNaN(n)||(t+=parseFloat(n))}),e.length>0&&(a=parseFloat(t)),a}function _(e,t){var a=0,n=0,r={};return $.each(e,function(e,t){var n=$(this).val().replace(/,/g,"");""==n&&(n=0),isNaN(n)||(a+=parseFloat(n))}),n=e.length>0?parseFloat(t)+parseFloat(a):parseFloat(t),r.subtotal=a,r.total=n,r}function k(e){var t,a,n=$(document).find(e).find(".extrapayment-sewa").find('input[name="rental_extrapayment[]"]'),r=$(document).find(e).find(".extrapayment-deposit").find('input[name="rental_extrapayment[]"]'),i=$(document).find(e).find('input[name="rental_total_hargasewa"]').val(),o=$(document).find(e).find('input[name="rental_total_deposit"]').val(),s=_(n,i),l=_(r,o);t=parseFloat(s.total)+parseFloat(l.total),a=parseFloat(s.subtotal)+parseFloat(l.subtotal);var d=$('input[name="rental_total_extrapayment"]');$(d).val(a),$(U).find("strong").html("Rp. "+addCommas(s.total)),$(V).find("strong").html("Rp. "+addCommas(l.total)),$(q).find("strong").html("Rp. "+addCommas(t))}function x(e){var t=$(document).find(e).find('input[name="rental_total_deposit"]').val(),a=parseFloat(t),n=$(document).find(e).find(".extrapayment-deposit").find('input[name="rental_extrapayment[]"]');return $.each(n,function(e,t){var n=$(this).val().replace(/,/g,"");""==n&&(n=0),isNaN(n)||(a+=parseFloat(n))}),a}$(g).on("click",function(e){e.preventDefault(),b($(this).attr("value"),".form-2"),$(".form-2").trigger("submit")}),$(h).on("click",function(e){e.preventDefault(),b($(this).attr("value"),".form-3"),$(".form-3").trigger("submit")}),$(".iframe-btn").fancybox({width:300,type:"iframe",height:300}),$(".iframe-btn").on("click",function(){$(window).on("message",OnMessage)}),stockmask(),$.trim($("#table-size-stock").html()).length&&$("#table-size-stock").find("tbody").accordion({header:"> tr > td > i"}).sortable({axis:"y",handle:"td",update:function(e,t){}}),$(document).on("click",".btn-add-more",function(e){e.preventDefault();var t=$(this).attr("id"),o=parseInt(t)+1,s=$(this).data("more");$(this).attr("id",""+o),$(i).show(),a(),setTimeout(function(){if(n(),$(i).hide(),"image"==s){$(".more").append(moreupload(r,o)).hide().fadeIn(500),$(".iframe-btn").fancybox({width:300,type:"iframe",height:300})}if("table-size-stock"==s){var e=$("#table-size-stock").find("tbody");$(e).find("tr");$(e).append(moresizestock()).hide().fadeIn(500),setTimeout(function(){$.trim($("#table-size-stock").html()).length&&$("#table-size-stock").find("tbody").sortable({axis:"y",update:function(e,t){}}),stockmask()})}if("table-payment"==s){e=$("#rentalextrapaymentparent").find("table"),$(e).find("tbody"),$(e).find("tfoot");$("#table-order").find("#extra-payment").append(moreextrapayment()).hide().fadeIn(500),f($(".pricemask"))}if("table-bukukas"==s){e=$("#table-bukukas").find("tbody"),$(e).find("tr");$(e).append(morebukukastransaction()).hide().fadeIn(500),f($(".pricemask"))}if("table-terima-uang"==s){e=$("#table-terima-uang").find("tbody"),$(e).find("tr");var t=$(e).find(".empty-table"),a=$("#pilih-terima-uang").val(),l=$(document).find(".item-terima-uang"),d=0;t.length>0?$(t).remove():0==l.length&&0==t.length&&($(e).empty(),$(e).append(emptyTerimaJenisTransaksi()).hide().fadeIn(500)),d="deposit"==a?x("#table-order"):function(e){var t=$(document).find("#table-order").find('input[name="rental_total_hargasewa"]').val(),a=parseFloat(t),n=$(document).find(e).find(".extrapayment-sewa").find('input[name="rental_extrapayment[]"]');return $.each(n,function(e,t){var n=$(this).val().replace(/,/g,"");""==n&&(n=0),isNaN(n)||(a+=parseFloat(n))}),a}("#table-order"),$(e).append(terimaJenisTransaksi(a,d)).hide().fadeIn(500),f($(e).find(".pricemask"))}if("table-kembali-uang"==s){e=$("#table-kembali-uang").find("tbody"),$(e).find("tr"),t=$(e).find(".empty-table"),l=$(document).find(".item-kembali-uang");var c=$("#table-order-return");t.length>0?$(t).remove():0==l.length&&0==t.length&&($(e).empty(),$(e).append(emptyTerimaJenisTransaksi()).hide().fadeIn(500));var u=$(c).find("input[name='return_late_charges']").val(),p=$(c).find("input[name='return_damage_fine']").val(),m=y($(c).find(".item-biaya").find("input[name='rental_dendapayment[]']")),g=x("#table-order-return")-parseFloat(u)-parseFloat(p)-parseFloat(m);$(e).append(kembaliJenisTransaksi(g)).hide().fadeIn(500),f($(e).find(".pricemask"))}if("table-biaya"==s){var h=$("#divider-biaya");$(h).before(moredenda).hide().fadeIn(500),f($(document).find(".item-biaya").find(".pricemask"))}},100)}),$("#table-order").on("change","select[name='rental_extrapayment_flag[]']",function(){var e=$(this).closest("tr"),t=$(this).val(),a=$(e).find(".extrapayment-row"),n=$(e).find(".extrapayment-sewa"),r=$(e).find(".extrapayment-deposit"),i=$(".pricemask");"deposit"==t?(swap(n,r),$(a).toggleClass("extrapayment-sewa extrapayment-deposit")):(swap(r,n),$(a).toggleClass("extrapayment-deposit extrapayment-sewa")),f(i),k("#table-order")}),$("#table-terima-uang").on("click",".remove-terima-uang",function(e){e.preventDefault();var t=$(this).closest("tbody"),a=($(this).closest("table"),$(this).closest("tr"));$(t).find(a).fadeOut(500,function(){$(a).remove(),setTimeout(function(){0==$(document).find(t).find(".item-terima-uang").length&&$(t).append(emptyTerimaJenisTransaksi()).hide().fadeIn(500)})})}),$("#table-kembali-uang").on("click",".remove-kembali-uang",function(e){e.preventDefault();var t=$(this).closest("tbody"),a=($(this).closest("table"),$(this).closest("tr"));$(t).find(a).fadeOut(500,function(){$(a).remove(),setTimeout(function(){0==$(document).find(t).find(".item-kembali-uang").length&&$(t).append(emptyTerimaJenisTransaksi()).hide().fadeIn(500)})})}),$("#table-order").on("input",".pricepayment",function(){k("#table-order")}),$("#table-order").on("click",".remove-extrapayment",function(e){e.preventDefault();$(this),$(this).closest("tbody"),$(this).closest("table");var t=$(this).closest("tr");$(t).fadeOut("fast",function(){$(t).remove(),k("#table-order")})}),$("#table-order-return").on("click",".remove-denda",function(e){e.preventDefault();$(this);var t=$(this).closest("tr");$(t).fadeOut("fast",function(){$(t).remove(),$e("#table-order-return")})}),$("#table-order-return").on("input",".pricepayment",function(){$e("#table-order-return")}),$("#table-order-return").on("click",".remove-extrapayment",function(e){e.preventDefault();$(this),$(this).closest("tbody"),$(this).closest("table");var t=$(this).closest("tr");$(t).fadeOut("fast",function(){$(t).remove(),k("#table-order-return")})}),$(document).on("click",".btn-add-more-correction",function(e){e.preventDefault();var t=$(this).attr("id"),r=parseInt(t)+1;$(this).attr("id",""+r),$(i).show(),a(),setTimeout(function(){n(),$(i).hide();var e=$("#correction");$(e).append(morecorrection(t)).hide().fadeIn(500)},100)}),$(document).on("click",".remove-correction",function(e){e.preventDefault();var t=$(this).attr("id"),a=$(document).find("."+t);$(a).fadeOut(500,function(){$(this).remove()})});var w=$(".accordion");function D(e){return{format:"d MM yyyy",startDate:e,autoclose:!0}}w.length>0&&$.each(w,function(e,t){var a=$(t);0==$(a).find(".no-data-group").length&&$(t).accordion({header:"> div > div.content"}).sortable({axis:"y",handle:"div.content",update:function(e,t){}})}),$(document).find(w).on("click",".remove-list",function(e){e.preventDefault();var t=$(this).closest(".group"),a=$(this).closest(".accordion");$(t).fadeOut(500,function(){$(t).remove(),setTimeout(function(){$.trim($(a).html()).length||$(a).append('<div class="group no-data-group"><div class="content">No data available</div></div>')})})}),$(".add-category-list").on("click",function(e){e.preventDefault();var t=$(this).data("list"),a=$(w),n=0,r="",i="",o=!1,s="This is message";$.each(a,function(e,a){var l=$(a).data("list");if(t==l){var d=$(a).find(".no-data-group");switch(t){case"product":n=$("#product-category").select2("data")[0].id,r=$("#product-category").select2("data")[0].text,i="product_category_id[]";break;case"gender":n=$("#gender-category").select2("data")[0].id,r=$("#gender-category").select2("data")[0].text,i="gender_category_id[]";break;case"size":n=$("#size-category").select2("data")[0].id,r=$("#size-category").select2("data")[0].text,i="size_category_id[]";break;case"store":n=$("#store-category").select2("data")[0].id,r=$("#store-category").select2("data")[0].text,i="store_category_id[]"}var c=$(document).find('input[name="'+i+'"]');$.each(c,function(e,t){$(t).val()==n&&(o=!0,s="Already exist data in list")}),0==o&&(d.length>0&&$(a).empty(),setTimeout(function(){var e,t,o;$(a).append((e=i,t=n,o=r,'<div class="group"><input type="hidden" name="'+e+'" value="'+t+'"><div class="content">'+o+'<i class="fa fa-times remove-list" aria-hidden="true" style="float: right; margin-top: 3px;"></i></div></div>')).hide().fadeIn(500),$(a).accordion({header:"> div > div.content"}).sortable({axis:"y",handle:"div.content"})}),s=!1)}}),o&&alert(s)}),$(document).on("click",".btn-cancel-more",function(e){e.preventDefault();var t=$(this).attr("id"),a=($(this).data("more"),$(document).find("."+t));$(a).fadeOut(500,function(){$(this).remove()})}),$(document).on("click",".remove-item-table",function(e){e.preventDefault();var t=$(this).closest("tr");$(t).fadeOut(500,function(){$(t).remove()})}),$(".select2-init").select2({placeholder:"Select"}),$(".select2-init").on("select2:select",function(e){var t=e.params.data.element,a=$(t);a.detach(),$(this).append(a),$(this).trigger("change")}),$(".select2-rental-init").select2({placeholder:"Search Customer"});var T=$(".datepicker-return").datepicker(D(returnDateDefault)).datepicker("setDate",returnDateDefault).datepicker("setStartDate",dateToday).on("changeDate",function(e){var t=$(document).find("#calendar");if(t.length>0)return $(i).show(),setTimeout(function(){$(t).datepicker("update"),$(i).hide()},100),!1}),C=$(".datepicker-current").datepicker({format:"d MM yyyy",autoclose:!0}).datepicker("setDate",dateToday).on("changeDate",function(e){var t=formatDate(e.format()),a=new Date(t),n=a.setDate(a.getDate()),r=a.setDate(a.getDate()+3);n=formatDate(n),n=new Date(n),r=formatDate(r),r=new Date(r);var o=$(".datepicker-return").val();o=formatDate(o),o=new Date(o),$(".datepicker-return").datepicker("destroy"),n>o?$(".datepicker-return").datepicker(D(r)).datepicker("setDate",r).datepicker("setStartDate",n):$(".datepicker-return").datepicker(D(r)).datepicker("setStartDate",n),$(document).find("#available-sizestock").length>0&&$(".select-product-size-rental").trigger("change");var s=$(document).find("#calendar");if(s.length>0)return $(i).show(),setTimeout(function(){$(s).datepicker("update"),$(i).hide()},100),!1});ge=formatDate(ge=$(".datepicker-view-start").val()),ge=new Date(ge);var F=$(".datepicker-view-start").datepicker({format:"d MM yyyy",autoclose:!0}).on("changeDate",function(e){var t=formatDate(e.format()),a=new Date(t),n=a.setDate(a.getDate()),r=a.setDate(a.getDate()+3);n=formatDate(n),n=new Date(n),r=formatDate(r),r=new Date(r);var o=$(".datepicker-view-end").val();o=formatDate(o),o=new Date(o),$(".datepicker-view-end").datepicker("destroy"),n>o?$(".datepicker-view-end").datepicker(D(r)).datepicker("setDate",r).datepicker("setStartDate",n):$(".datepicker-view-end").datepicker(D(r)).datepicker("setStartDate",n),$(document).find("#available-sizestock").length>0&&$(".select-product-size-rental").trigger("change");var s=$(document).find("#calendar");if(s.length>0)return $(i).show(),setTimeout(function(){$(s).datepicker("update"),$(i).hide()},100),!1}),j=$(".datepicker-view-end").datepicker({format:"d MM yyyy",autoclose:!0}).datepicker("setStartDate",ge).on("changeDate",function(e){$(document).find("#available-sizestock").length>0&&$(".select-product-size-rental").trigger("change");var t=$(document).find("#calendar");if(t.length>0)return $(i).show(),setTimeout(function(){$(t).datepicker("update"),$(i).hide()},100),!1});$(".datepicker-view").datepicker({format:"d MM yyyy",startDate:dateToday,autoclose:!0}),$(".datepicker-view").datepicker({format:"d MM yyyy",startDate:dateToday,autoclose:!0}),$(".datepicker").datepicker({format:"d MM yyyy",autoclose:!0});if($(".datepicker-month").length>0){$(".datepicker").datepicker("destroy");$(".datepicker-month").datepicker({format:"MM yyyy",startView:"months",minViewMode:"months",autoclose:!0,clearBtn:!0})}var S=$(".select-product-size-rental"),M=$(".select-product-rental"),N=$(".select-store-rental"),z=$(".product-rental-detail");$(N).on("change",function(e){var o=$(this).select2("data")[0].id;$.ajax({url:r+"adminsite/rental_order/get_product",type:"POST",dataType:"json",data:{id:o},beforeSend:function(){a(),$(i).show()},complete:function(){n(),$(i).hide()},success:function(e){1==e.flag?($(".popover").remove(),$("#calendar").remove(),void 0!==e.template&&($(M).empty(),$(S).empty(),$(z).empty(),setTimeout(function(){$.trim($(M).html()).length||($(M).append(e.template),$(M).trigger("change"))}))):($(M).empty(),$(S).empty(),$(z).empty()),setTimeout(function(){$(".main-product-rental-wrapper").matchHeight()})},fail:function(){n(),t("error","Connection Error or something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide()}})});$(".wrapper-select-product");var O=$(".thumbnail-select-product");function P(e){return String(e).slice(-2)}$(M).on("change",function(e){var o=$(this).select2("data")[0].id;$.ajax({url:r+"adminsite/rental_order/get_sizestock",type:"POST",dataType:"json",data:{id:o},beforeSend:function(){a(),$(i).show()},complete:function(){n(),$(i).hide()},success:function(e){1==e.flag?($("#calendar").remove(),$(".popover").remove(),$(".popover-content").remove(),void 0!==e.template&&($(S).empty(),$(z).empty(),$(O).attr("href",e.thumbnail),$(O).find("img").attr("src",e.thumbnail),setTimeout(function(){$.trim($(S).html()).length||$(S).append(e.template)}))):($(S).empty(),$(z).empty()),setTimeout(function(){$(".main-product-rental-wrapper").matchHeight()})},fail:function(){n(),t("error","Connection Error or something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide()}})}),$(document).on("change",".select-product-size-rental",function(e){var o=$(".select-product-rental").select2("data")[0].id,s=$(this).val(),l=$('input[name="start_date"]').val(),d=$('input[name="end_date"]').val();$.ajax({url:r+"adminsite/rental_order/get_sizestock_detail",type:"POST",dataType:"json",data:{id:s,product_id:o,start:l,end:d},beforeSend:function(e){a(),$(i).show()},complete:function(){n(),$(i).hide()},success:function(e){1==e.flag?void 0!==e.template&&($(z).empty(),setTimeout(function(){$.trim($(z).html()).length||($(z).append(e.template),setTimeout(function(){stockmask(),$(".info-item-wrapper").matchHeight(),$(".info-item-wrapper").find(".info-title").matchHeight(),$(".info-item-wrapper").find(".info-data").matchHeight(),$(".main-product-rental-wrapper").matchHeight()}))})):($(z).empty(),t("error",e.message))},fail:function(){n(),t("error","Connection Error or something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide()}}),$.ajax({url:r+"adminsite/rental_order/calendarproduct",data:{id:s,product_id:o},type:"POST",dataType:"json",beforeSend:function(e){a(),$(i).show()},complete:function(){n(),$(i).hide()},success:function(e){if(1==e.flag){var t=$(".main-calendar");$(t).empty();var a=e;setTimeout(function(){$.trim($(t).html()).length||($(t).append(e.template),setTimeout(function(){!function(e){$(".popover-content").remove(),$(".popover").remove();var t=e.data,a=$(document).find("#calendar");if(a.length>0){var n=new Date,r=(new Date(n.getFullYear(),n.getMonth(),n.getDate()),[]),i=[],o=[],s=[],l=[],d=[],c=$(a).data("class"),u=$(a).data("date"),p=$(a).data("stock"),m=$(a).data("rental");if(c=c.split(","),u=u.split(","),p=p.split(","),m=m.split(","),u.length>0)for(var f=0;f<u.length;f++)i[u[f]]=c[f],o[u[f]]=p[f],s[u[f]]=m[f];$(a).datepicker({defaultViewDate:"month",stepMonths:0,changeMonth:!1,changeYear:!1,startDate:"-0d",autoclose:!0,beforeShowDay:function(e){if(e.getFullYear(),e.getMonth(),("0"+e.getDate()).slice(-2),C.length>0&&T.length>0){var t=$(".datepicker-current").val();t=new Date(Date.parse(t));var a=new Date(Date.parse(t));t=P(t.getMonth()+1)+"/"+P(t.getDate())+"/"+t.getFullYear();var n=$(".datepicker-return").val();n=new Date(Date.parse(n)),p=(p=new Date(Date.parse(n))).setDate(p.getDate()+1),n=P(n.getMonth()+1)+"/"+P(n.getDate())+"/"+n.getFullYear(),n=$(".datepicker-return").val();var c=getDatesArr(a,p),u=[];c.length>0&&$.each(c,function(e,t){var a=P(t.getMonth()+1)+"/"+P(t.getDate())+"/"+t.getFullYear();u[a]="highlight-day"})}var p;F.length>0&&j.length>0&&(t=$(".datepicker-view-start").val(),t=new Date(Date.parse(t)),a=new Date(Date.parse(t)),t=P(t.getMonth()+1)+"/"+P(t.getDate())+"/"+t.getFullYear(),n=$(".datepicker-view-end").val(),n=new Date(Date.parse(n)),p=(p=new Date(Date.parse(n))).setDate(p.getDate()+1),n=P(n.getMonth()+1)+"/"+P(n.getDate())+"/"+n.getFullYear(),n=$(".datepicker-view-end").val(),c=getDatesArr(a,p),u=[],c.length>0&&$.each(c,function(e,t){var a=P(t.getMonth()+1)+"/"+P(t.getDate())+"/"+t.getFullYear();u[a]="highlight-day"}));var m=e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear();if($.inArray(t,m),m in o){var f=o[m].split(",");l.push(f)}if(m in s&&(f=s[m].split(","),d.push(f)),m in i){var g=m.split("/"),h=i[m].split(",");return r.push("toggle-"+g[0]+g[1]+g[2]),m in u?{classes:u[m]+" "+h[0]+" toggle-"+g[0]+g[1]+g[2]}:{classes:h[0]+" toggle-"+g[0]+g[1]+g[2]}}if(m in u)return{classes:u[m]};C.length>0&&$(C).off("change").on("change",function(e){e.preventDefault();var t=$(".datepicker-current").val();t=new Date(Date.parse(t));var a=new Date(Date.parse(t));t=P(t.getMonth()+1)+"/"+P(t.getDate())+"/"+t.getFullYear();var n=$(".datepicker-return").val();n=new Date(Date.parse(n));var o=new Date(Date.parse(n));n=P(n.getMonth()+1)+"/"+P(n.getDate())+"/"+n.getFullYear();var s=getDatesArr(a,o),l=[];if(s.length>0&&$.each(s,function(e,t){var a=P(t.getMonth()+1)+"/"+P(t.getDate())+"/"+t.getFullYear();l[a]="highlight-day"}),m in i){var d=m.split("/"),c=i[m].split(",");return r.push("toggle-"+d[0]+d[1]+d[2]),m in l?{classes:l[m]+" "+c[0]+" toggle-"+d[0]+d[1]+d[2]}:{classes:c[0]+" toggle-"+d[0]+d[1]+d[2]}}if(m in l)return{classes:l[m]}}),T.length>0&&$(T).off("change").on("change",function(e){e.preventDefault();var t=$(".datepicker-current").val();t=new Date(Date.parse(t));var a=new Date(Date.parse(t));t=P(t.getMonth()+1)+"/"+P(t.getDate())+"/"+t.getFullYear();var n=$(".datepicker-return").val();n=new Date(Date.parse(n));var o=new Date(Date.parse(n));n=P(n.getMonth()+1)+"/"+P(n.getDate())+"/"+n.getFullYear();var s=getDatesArr(a,o),l=[];if(s.length>0&&$.each(s,function(e,t){var a=P(t.getMonth()+1)+"/"+P(t.getDate())+"/"+t.getFullYear();l[a]="highlight-day"}),m in i){var d=m.split("/"),c=i[m].split(",");return r.push("toggle-"+d[0]+d[1]+d[2]),m in l?{classes:l[m]+" "+c[0]+" toggle-"+d[0]+d[1]+d[2]}:{classes:c[0]+" toggle-"+d[0]+d[1]+d[2]}}if(m in l)return{classes:l[m]}}),F.length>0&&$(F).off("change").on("change",function(e){e.preventDefault();var t=$(".datepicker-view-start").val();t=new Date(Date.parse(t));var a=new Date(Date.parse(t));t=P(t.getMonth()+1)+"/"+P(t.getDate())+"/"+t.getFullYear();var n=$(".datepicker-view-end").val();n=new Date(Date.parse(n));var o=new Date(Date.parse(n));n=P(n.getMonth()+1)+"/"+P(n.getDate())+"/"+n.getFullYear();var s=getDatesArr(a,o),l=[];if(s.length>0&&$.each(s,function(e,t){var a=P(t.getMonth()+1)+"/"+P(t.getDate())+"/"+t.getFullYear();l[a]="highlight-day"}),m in i){var d=m.split("/"),c=i[m].split(",");return r.push("toggle-"+d[0]+d[1]+d[2]),m in l?{classes:l[m]+" "+c[0]+" toggle-"+d[0]+d[1]+d[2]}:{classes:c[0]+" toggle-"+d[0]+d[1]+d[2]}}if(m in l)return{classes:l[m]}}),j.length>0&&$(j).on("change",function(e){e.preventDefault();var t=$(".datepicker-view-start").val();t=new Date(Date.parse(t));var a=new Date(Date.parse(t));t=P(t.getMonth()+1)+"/"+P(t.getDate())+"/"+t.getFullYear();var n=$(".datepicker-view-end").val();n=new Date(Date.parse(n));var o=new Date(Date.parse(n));n=P(n.getMonth()+1)+"/"+P(n.getDate())+"/"+n.getFullYear();var s=getDatesArr(a,o),l=[];if(s.length>0&&$.each(s,function(e,t){var a=P(t.getMonth()+1)+"/"+P(t.getDate())+"/"+t.getFullYear();l[a]="highlight-day"}),m in i){var d=m.split("/"),c=i[m].split(",");return r.push("toggle-"+d[0]+d[1]+d[2]),m in l?{classes:l[m]+" "+c[0]+" toggle-"+d[0]+d[1]+d[2]}:{classes:c[0]+" toggle-"+d[0]+d[1]+d[2]}}if(m in l)return{classes:l[m]}})}}).on("changeDate",function(e){$(".popover-content").remove(),$(".popover").remove();var a=e.format(),n="0/0";void 0===t?($(".popover-content").remove(),$(".popover").remove()):(n=t.default.available+"/"+t.default.stock,$.each(t,function(e,t){a==e&&"default"!==e&&(n=t.available+"/"+t.stock)}),$(".popover-content").remove(),$(".popover").remove()),$(e.target);var r=$(this).find(".datepicker-days").find(".day");$(r).each(function(e,t){$(t).hasClass("active")?($(t).popover({container:"body",trigger:"click",title:"Availability",content:n,html:!0,placement:"top"}),$(t).popover("show")):$(t).popover("hide")})}).on("changeMonth",function(e){$(".popover-content").remove(),$(".popover").remove()}),$(a).find(".datepicker-switch").click(function(e){e.preventDefault(),e.stopPropagation()})}}(a),$(".main-product-rental-wrapper").matchHeight()}))})}},fail:function(){n(),t("error","Connection Error or something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide()}})});$(".select2-customer");$(".select2-customer").on("change",function(e){var o=$(".select2-customer").select2("data")[0].id;0==o&&""==o||$.ajax({url:r+"adminsite/rental_order/get_customer",type:"POST",dataType:"json",data:{customer_id:o},beforeSend:function(){a(),$(i).show()},complete:function(){n(),$(i).hide()},success:function(e){1==e.flag&&($('input[name="customer_name"]').val(e.data.customer_name),$('input[name="customer_phone"]').val(e.data.customer_phone),$('textarea[name="customer_address"]').val(e.data.customer_address))},fail:function(){n(),t("error","Connection Error or something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide()}})});var R=$(".add-item-rental"),A=$(".table-list-item"),E=$(A).find("tbody");$(R).on("click",function(e){e.preventDefault();var o=$("#available-sizestock"),s=$(".select-product-rental").select2("data")[0].id,l=$(S).val(),d=$(".qty_rental").val(),c=$(document).find(E).find('input[name="rental_product_sizestock_id[]"]'),u=$(document).find(E).find('input[name="product_id[]"]'),p=!1,m=!1;function f(){$.ajax({url:r+"adminsite/rental_order/add_item_product",type:"POST",dataType:"json",data:{product_id:s,product_sizestock_id:l,qty:d},beforeSend:function(){a(),$(i).show()},complete:function(){n(),$(i).hide()},success:function(e){var a=0,n=0,r=0,i=$(".subtotal"),o=$(".total");1==e.flag?($(".popover").remove(),$(".popover-content").remove(),void 0!==e.template&&($(E).append(e.template),$(".select-product-rental").val(0).trigger("change"),$(z).empty(),$(document).find(".select-product-size-rental").val(0),setTimeout(function(){$("#calendar").remove();var e=$(E).find('input[name="rental_product_hargasewa[]"]'),t=$(E).find('input[name="rental_product_deposit[]"]');$.each(e,function(e,t){var n=$(t).val();isNaN(n)||(a+=parseFloat(n))}),$.each(t,function(e,t){var a=$(t).val();isNaN(a)||(n+=parseFloat(a))}),r=parseFloat(a)+parseFloat(n),$(i).find('input[name="rental_total_hargasewa"]').val(a),$(i).find('input[name="rental_total_deposit"]').val(n),$(o).find('input[name="rental_total"]').val(r),$(i).find(".pricetotal_hargasewa").html("Rp. "+addCommas(a)),$(i).find(".pricetotal_deposit").html("Rp. "+addCommas(n)),$(o).find(".all_price").html("Rp. "+addCommas(r)),$(".main-product-rental-wrapper").matchHeight()}),t("success_with_message","Produk telah ditambahkan ke dalam list order","center")),$(O).attr("href","assets/images/no-image.png"),$(O).find("img").attr("src","assets/images/no-image.png")):0==e.flag?t("validation",e.message):t("error",e.message)},fail:function(){n(),t("error","Connection Error or something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide()}})}if($.each(c,function(e,t){var a=$(this).val();l==a&&(p=!0)}),$.each(c,function(e,t){var a=$(this).val();u==a&&(m=!0)}),1==p&&0==m)t("validation","Product size already exists in table cost.");else if(0==s||0==l)t("validation","Select size first.");else if(""==d||0==d)t("validation","Input Qty first.");else if(o.length>0){var g=$(o).val(),h=parseFloat(g)-parseFloat(d);g<=0||h<0?new PNotify({title:"Notification",text:"Stock tidak mencukupi, apakah tetap ingin melanjutkan order?",hide:!1,confirm:{confirm:!0,buttons:[{text:"Ya"},{text:"Tidak"}]},buttons:{closer:!1,sticker:!1},history:{history:!1},addclass:"pnotify-center"}).get().on("pnotify.confirm",function(){f()}):f()}else t("validation","Something Wrong, product size not found.")}),$(document).on("click",".remove-rental-product",function(e){e.preventDefault();var t,a,n,r=$(this).closest("tr"),i=$(".subtotal"),o=$(".total"),s=($(o).find('input[name="rental_total"]').val(),$(i).find('input[name="rental_total_hargasewa"]').val()),l=$(i).find('input[name="rental_total_deposit"]').val(),d=$(this).data("hargasewa"),c=$(this).data("deposit");t=parseFloat(s)-parseFloat(d),a=parseFloat(l)-parseFloat(c),n=parseFloat(t)+parseFloat(a),$(i).find('input[name="rental_total_hargasewa"]').val(t),$(i).find('input[name="rental_total_deposit"]').val(a),$(o).find('input[name="rental_total"]').val(n),$(i).find(".pricetotal_hargasewa").html("Rp. "+addCommas(t)),$(i).find(".pricetotal_deposit").html("Rp. "+addCommas(a)),$(o).find(".all_price").html("Rp. "+addCommas(n)),$(r).fadeOut(500,function(){$(r).remove(),$(".main-product-rental-wrapper").matchHeight()})});var I=$("#customer_id"),Y=$("#customer_name"),H=$("#customer_phone"),J=$("#customer_address"),W=$("#rental_start_date"),K=$("#rental_end_date"),L=$("#rental_invoice"),B=$("#rental_note"),U=($("#rental_hargasewa"),$("#rental_deposit"),$("#rental_total_hargasewa")),V=$("#rental_total_deposit"),q=$("#rental_total"),Q=$("#table-order"),G=$(Q).find("#tbody-order"),X=$(".store_address");$("#open-form-2").submit(function(e){e.preventDefault();var r=$(this).attr("action");$(this).serializeArray();$.ajax({url:r,type:"POST",dataType:"json",data:$(this).serializeArray(),beforeSend:function(){a(),$(i).show()},complete:function(){n(),$(i).hide()},success:function(e){1==e.flag?($(X).html(e.data_single.store_address),$(I).val(e.data_single.customer_id),$(Y).val(e.data_single.customer_name),$(H).val(e.data_single.customer_phone),$(J).val(e.data_single.customer_address),$(W).val(e.data_single.start_date),$(K).val(e.data_single.end_date),$(L).val(e.data_single.rental_invoice),$(B).val(e.data_single.rental_note),$(U).find("strong").html("Rp. "+e.data_single.rental_total_hargasewa),$(V).find("strong").html("Rp. "+e.data_single.rental_total_deposit),$(q).find("strong").html("Rp. "+e.data_single.rental_total),void 0!==e.data_product&&$(G).append(e.data_product),setTimeout(function(){$(".content-wrapper").hide(),$("#form-2").show(),f($(".pricemask"));var e=$(document).find("#table-order").find('input[name="rental_product_hargasewa[]"]'),t=$(document).find("#table-order").find('input[name="rental_product_deposit[]"]'),a=$(document).find("#table-order").find('input[name="rental_total_hargasewa"]'),n=$(document).find("#table-order").find('input[name="rental_total_deposit"]'),r=$(document).find("#table-order").find('input[name="rental_total"]'),i=0,o=0,s=0;$.each(e,function(e,t){var a=$(this).val().replace(/,/g,"");""==a&&(a=0),isNaN(a)||(i+=parseFloat(a))}),$.each(t,function(e,t){var a=$(this).val().replace(/,/g,"");""==a&&(a=0),isNaN(a)||(o+=parseFloat(a))}),s=parseFloat(i)+parseFloat(o);_($(document).find("#table-order").find('input[name="rental_extrapayment[]"]'),s);k("#table-order"),$(e).on("input",function(){i=0,$.each(e,function(e,t){var a=$(this).val().replace(/,/g,"");""==a&&(a=0),isNaN(a)||(i+=parseFloat(a))}),$(a).val(i),$(U).find("strong").html("Rp. "+addCommas(i)),s=0,s=i+o,$(r).val(s),$(q).find("strong").html("Rp. "+addCommas(s));_($(document).find("#table-order").find('input[name="rental_extrapayment[]"]'),s);k("#table-order")}),$(t).on("input",function(){o=0,$.each(t,function(e,t){var a=$(this).val().replace(/,/g,"");""==a&&(a=0),isNaN(a)||(o+=parseFloat(a))}),$(n).val(o),$(V).find("strong").html("Rp. "+addCommas(o)),s=0,s=i+o,$(r).val(s),$(q).find("strong").html("Rp. "+addCommas(s));_($(document).find("#table-order").find('input[name="rental_extrapayment[]"]'),s);k("#table-order")})},500)):0==e.flag&&"validation"==e.process?t("validation",e.message):t("error","Something Wrong Please Try Again Later")},fail:function(){n(),t("error","Connection Error or something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide()}})});var Z=$("#customer_id_return"),ee=$("#customer_name_return"),te=$("#customer_phone_return"),ae=$("#customer_address_return"),ne=$("#rental_start_date_return"),re=$("#rental_end_date_return"),ie=$("#rental_invoice_return"),oe=($("#rental_hargasewa_return"),$("#rental_deposit_return"),$("#rental_total_hargasewa_return")),se=$("#rental_total_deposit_return"),le=$("#rental_total_return"),de=$("#return_note"),ce=$("#return_late_charges"),ue=$("#return_damage_fine"),pe=$("#return_deposit_"),me=$("#table-order-return"),fe=$(me).find("#tbody-order");function $e(e){var t,a,n=$(document).find(e).find(".extrapayment-sewa").find('input[name="rental_extrapayment[]"]'),r=$(document).find(e).find(".extrapayment-deposit").find('input[name="rental_extrapayment[]"]'),i=$(document).find(e).find(".item-biaya").find('input[name="rental_dendapayment[]"]'),o=$(document).find(e).find('input[name="rental_total_hargasewa"]').val(),s=$(document).find(e).find('input[name="return_late_charges"]').val(),l=$(document).find(e).find('input[name="return_damage_fine"]').val(),d=$(document).find(e).find('input[name="rental_total_deposit"]').val(),c=y(i),u=_(n,o),p=_(r,d),m=parseFloat(p.total)-parseFloat(c)-parseFloat(s)-parseFloat(l);t=parseFloat(u.total)+parseFloat(p.total),a=parseFloat(u.subtotal)+parseFloat(p.subtotal);var f=$('input[name="rental_total_extrapayment"]');$(f).val(a),$(oe).html("Rp. "+addCommas(u.total)),$(se).html("Rp. "+addCommas(p.total)),$(le).find("strong").html("Rp. "+addCommas(t)),$(pe).find("strong").html("Rp. "+addCommas(m))}$("#open-form-3").submit(function(e){e.preventDefault();var r=$(this).attr("action"),o=$(this).serializeArray();$.ajax({url:r,type:"POST",dataType:"json",data:o,beforeSend:function(){a(),$(i).show()},complete:function(){n(),$(i).hide()},success:function(e){if(n(),1==e.flag){$(X).html(e.data_single.store_address),$(Z).val(e.data_single.customer_id),$(ee).val(e.data_single.customer_name),$(te).val(e.data_single.customer_phone),$(ae).val(e.data_single.customer_address),$(ne).val(e.data_single.start_date),$(re).val(e.data_single.return_date),$(ie).val(e.data_single.rental_invoice),$(oe).html("Rp. "+e.data_single.rental_total_hargasewa),$(se).html("Rp. "+e.data_single.rental_total_deposit),$(le).find("strong").html("Rp. "+e.data_single.rental_total),$(de).html(e.data_single.return_note),$(ce).find("strong").html("- Rp. "+e.data_single.return_late_charges),$(ue).find("strong").html("- Rp. "+e.data_single.return_damage_fine),void 0!==e.data_product&&$(fe).append(e.data_product);var a=$(document).find("#table-order-return").find('input[name="rental_total_deposit"]').val(),r=_($(document).find("#table-order-return").find(".extrapayment-deposit").find('input[name="rental_extrapayment[]"]'),a),i=parseFloat(r.total)-parseFloat(e.data_single.return_late_charges.replace(/,/g,""))-parseFloat(e.data_single.return_damage_fine.replace(/,/g,""));$(pe).find("strong").html("Rp. "+addCommas(i)),setTimeout(function(){$(".content-wrapper").hide(),$("#form-3").show(),f($(".pricemask"));var e=$(document).find("#form-3").find("#table-order").find('input[name="rental_product_hargasewa[]"]'),t=$(document).find("#form-3").find("#table-order").find('input[name="rental_product_deposit[]"]'),a=$(document).find("#form-3").find("#table-order").find('input[name="rental_total_hargasewa"]'),n=$(document).find("#form-3").find("#table-order").find('input[name="rental_total_deposit"]'),r=$(document).find("#form-3").find("#table-order").find('input[name="rental_total"]'),i=0,o=0,s=0;$.each(e,function(e,t){var a=$(this).val().replace(/,/g,"");""==a&&(a=0),isNaN(a)||(i+=parseFloat(a))}),$.each(t,function(e,t){var a=$(this).val().replace(/,/g,"");""==a&&(a=0),isNaN(a)||(o+=parseFloat(a))}),s=parseFloat(i)+parseFloat(o);_($(document).find("#form-3").find("#table-order-return").find('input[name="rental_extrapayment[]"]'),s);$e("#table-order-return"),$(e).on("input",function(){i=0,$.each(e,function(e,t){var a=$(this).val().replace(/,/g,"");""==a&&(a=0),isNaN(a)||(i+=parseFloat(a))}),$(a).val(i),$(U).find("strong").html("Rp. "+addCommas(i)),s=0,s=i+o,$(r).val(s),$(q).find("strong").html("Rp. "+addCommas(s));_($(document).find("#form-3").find("#table-order-return").find('input[name="rental_extrapayment[]"]'),s);$e("#table-order-return")}),$(t).on("input",function(){o=0,$.each(t,function(e,t){var a=$(this).val().replace(/,/g,"");""==a&&(a=0),isNaN(a)||(o+=parseFloat(a))}),$(n).val(o),$(V).find("strong").html("Rp. "+addCommas(o)),s=0,s=i+o,$(r).val(s),$(q).find("strong").html("Rp. "+addCommas(s));_($(document).find("#form-3").find("#table-order-return").find('input[name="rental_extrapayment[]"]'),s);$e("#table-order-return")})},500)}else 0==e.flag&&"validation"==e.process?t("validation",e.message):t("error","Something Wrong Please Try Again Later")},fail:function(){n(),t("error","Connection Error or something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide()}})}),$(".open-form-1").on("click",function(e){e.preventDefault(),$(I).val(""),$(Y).val(""),$(H).val(""),$(J).val(""),$(W).val(""),$(K).val(""),$(L).val(""),$(G).empty(),$(Z).val(""),$(ee).val(""),$(te).val(""),$(ae).val(""),$(ne).val(""),$(re).val(""),$(ie).val(""),$(fe).empty(),$(".content-wrapper").hide(),$("#form-1").show()});var ge,he=$("#return-deposit"),ve=$("#late-charges"),be=$("#damage-fine"),ye=$("#count_product"),_e=0,ke=0,xe=0,we=0;he.length>0&&(he=$(he).val().replace(/,/g,"")),ve.length>0&&(_e=$(ve).val().replace(/,/g,"")),be.length>0&&(ke=$(be).val().replace(/,/g,"")),$(ve).on("input",function(){value=$(this).val().replace(/,/g,""),""==value&&(value=0),isNaN(value)||(_e=parseFloat(value)),xe=parseFloat(_e)+parseFloat(ke),we=parseFloat(he)-parseFloat(xe),$(document).find('input[name="return_deposit"]').val(we),$("#return-result-deposit").val(addCommas(we))}),$(be).on("input",function(){var e=$(this).val().replace(/,/g,"");""==e&&(e=0),isNaN(e)||(ke=parseFloat(e)),xe=parseFloat(_e)+parseFloat(ke),we=parseFloat(he)-parseFloat(xe),$(document).find('input[name="return_deposit"]').val(we),$("#return-result-deposit").val(addCommas(we))}),ge=formatDate(ge=$(".datepicker-view-start").val()),ge=new Date(ge);$(".datepicker-return-date").datepicker({format:"d MM yyyy",autoclose:!0}).datepicker("setStartDate",ge).on("changeDate",function(e){var t=$("#open-form-3").find('input[name="end_date"]').val();t=formatDate(t),t=new Date(t);var a,n=formatDate(e.format()),r=new Date(n);a=Math.round(Math.abs(r.getTime()-t.getTime())/864e5);var i=Math.round(r.getTime()-t.getTime())/864e5;i=Math.sign(i);var o=$("#late_charge_value").val(),s=r.getTime(),l=t.getTime();if(i>=0&&s>l){var d=parseFloat(o)*(parseFloat($(ye).val())*parseFloat(a));$(ve).val(d).trigger("input")}else{d=0;$(ve).val(d).trigger("input")}}),$(".select-status-rental");$(l).on("change",".select-status-rental",function(e){e.preventDefault();var o=$(this).val();$.ajax({url:r+"adminsite/rental_order/update_status",type:"POST",dataType:"json",data:{id:o},beforeSend:function(){a(),$(i).show()},complete:function(){$(i).hide(),n()},success:function(e){1==e.flag?(t("update"),void 0!==l&&$(l).DataTable().ajax.reload()):t("error",e.message)},fail:function(){n(),t("error","Connection Error or something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide()}})});var De=$("#filtering-return-list");$(De).submit(function(e){e.preventDefault();var r=$(this).attr("action"),o=$(this).serializeArray();$.ajax({url:r,type:"POST",dataType:"json",data:o,beforeSend:function(){a(),$(i).show()},complete:function(){$(i).hide(),n()},success:function(e){0==e.flag?t("validation",e.message):1==e.flag?void 0!==l&&($(l).DataTable().clear().draw(),$(l).DataTable().rows.add(e.data),$(l).DataTable().columns.adjust().draw()):t("error","Connection Error or something is wrong please try again later.")},fail:function(){n(),t("error","Connection Error or something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide()}})});var Te=$(".reset-filtering-return-list");$(Te).on("click",function(e){void 0!==l&&($('input[name="start"]').val(""),$('input[name="end"]').val(""),$('select[name="filter"]').prop("selectedIndex",0),$('select[name="store_location"]').prop("selectedIndex",0),$(l).DataTable().ajax.reload()),a(),$(i).show(),$.ajax({url:r+"adminsite/return_list/reset_print_report",dataType:"json",beforeSend:function(){a(),$(i).show()},success:function(e){1==e.flag&&setTimeout(function(){$(i).hide(),n()},2e3)},fail:function(){n(),t("error","Connection Error or something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide()}})});var Ce=$("#filtering-stock-list");$(Ce).submit(function(e){e.preventDefault();var r=$(this).attr("action"),o=$(this).serializeArray();$.ajax({url:r,type:"POST",dataType:"json",data:o,beforeSend:function(){a(),$(i).show()},complete:function(){$(i).hide(),n()},success:function(e){0==e.flag?t("validation",e.message):1==e.flag?void 0!==l&&($(l).DataTable().clear().draw(),$(l).DataTable().rows.add(e.data),$(l).DataTable().columns.adjust().draw()):t("error","Connection Error or something is wrong please try again later.")},fail:function(){n(),t("error","Connection Error or something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide()}})});var Fe=$(".reset-filtering-stock-list");$(Fe).on("click",function(e){void 0!==l&&($('select[name="store_location"]').prop("selectedIndex",0),$(l).DataTable().ajax.reload()),a(),$(i).show(),$.ajax({url:r+"adminsite/stock_list/reset_print_report",dataType:"json",beforeSend:function(){a(),$(i).show()},success:function(e){1==e.flag&&setTimeout(function(){$(i).hide(),n()},2e3)},fail:function(){n(),t("error","Connection Error or something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide()}})});var je=$("#filtering-most-rented");$(je).submit(function(e){e.preventDefault();var r=$(this).attr("action"),o=$(this).serializeArray();$.ajax({url:r,type:"POST",dataType:"json",data:o,beforeSend:function(){a(),$(i).show()},complete:function(){$(i).hide(),n()},success:function(e){0==e.flag?t("validation",e.message):1==e.flag?void 0!==l&&($(l).DataTable().clear().draw(),$(l).DataTable().rows.add(e.data),$(l).DataTable().columns.adjust().draw()):t("error","Connection Error or something is wrong please try again later.")},fail:function(){n(),t("error","Connection Error or something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide()}})});var Se=$(".reset-filtering-most-rented");$(Se).on("click",function(e){void 0!==l&&$(l).DataTable().ajax.reload(),a(),$(i).show(),$.ajax({url:r+"adminsite/dashboard/reset_print_report",dataType:"json",beforeSend:function(){a(),$(i).show()},success:function(e){1==e.flag&&setTimeout(function(){$(i).hide(),n()},2e3)},fail:function(){n(),t("error","Connection Error or something is wrong please try again later."),$(i).hide()},error:function(e,a,r){n(),t("error",r+"\r\n"+e.statusText+"\r\n"+e.responseText),$(i).hide()}})});var Me=$("#show-datepicker");$(Me).on("change",function(e){var t="#"+$(this).val();$(".collapse").collapse("hide"),$(t).length>0&&setTimeout(function(){$(t).collapse("show")},350)}),$("#transactionModal").on("shown.bs.modal",function(e){var t=$(e.relatedTarget).attr("data-action"),a=$(this).find(".modal-body"),n=$(this).find(".modal-title").html(""),r={};("add"==t&&$(n).html("ADD NEW TRANSACTION"),"edit"==t&&($(n).html("EDIT TRANSACTION"),r.id=$(e.relatedTarget).attr("data-id"),r.jenis=$(e.relatedTarget).attr("data-jenis"),r.note=$(e.relatedTarget).attr("data-note"),r.debit=$(e.relatedTarget).attr("data-debit"),r.kredit=$(e.relatedTarget).attr("data-kredit"),r.flag=$(e.relatedTarget).attr("data-flag"),r.tanggal=$(e.relatedTarget).attr("data-tanggal")),$.trim($(a).html()).length)||($(a).append(morebukukastransaction(t,r)).hide().fadeIn(500),f($(this).find(".pricemask")))}),$("#transactionModal").on("show.bs.modal",function(e){var t=$(this).find(".modal-body");$(t).empty()}),$(".btn-remove-transaction").on("click",function(e){return!!confirm("Are you sure want to delete this?")})});